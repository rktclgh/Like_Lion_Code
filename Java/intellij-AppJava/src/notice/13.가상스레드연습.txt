 1. ëª©í‘œ ì •ë¦¬ 
[ëª©í‘œ1] Thread.Builderê°€ ì–´ë–¤ íƒ€ì…ì¸ì§€ êµ¬ë¶„í•˜ì

Thread.ofVirtual(), Thread.ofPlatform() ê°™ì€ ë¹Œë” íŒ¨í„´ìœ¼ë¡œ ìŠ¤ë ˆë“œë¥¼ ë§Œë“¤ ìˆ˜ ìˆê²Œ í•´ì¤˜.

ì—¬ê¸°ì„œ ë‚˜ì˜¤ëŠ” ê²Œ ë°”ë¡œ Thread.Builder ì¸í„°í˜ì´ìŠ¤ì•¼.

[ëª©í‘œ2] í•´ë‹¹ íƒ€ì…ì— ë§ëŠ” ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•´ì„œ ì‹¤í–‰ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì. 

1. Runnable task = () -> System.out.println("Hello Virtual Thread!");

   Thread t = Thread.ofVirtual().name("v-thread", 0).start(task);


2. Runnable task = () -> System.out.println("Hello Platform Thread!");

   Thread t = Thread.ofPlatform().name("p-thread", 0).start(task);





2. ìš©ì–´ ë¹ˆì¹¸ ì±„ìš°ê¸° : ì•„ë˜ ë¹ˆì¹¸ì„ ì±„ì›Œë³´ì„¸ìš” (ë‹¨ì–´: Virtual, Platform, sealed, join, start)
Thread.BuilderëŠ” ________ interfaceë¡œ ì„ ì–¸ë˜ì–´ ìˆë‹¤.

sealed

ğŸ” í•´ì„¤:
Thread.BuilderëŠ” Java 21ì—ì„œ ë„ì…ëœ
sealed interface ë¡œ ì„ ì–¸ë˜ì–´ ìˆì–´.

public sealed interface Thread.Builder
    permits Thread.Builder.OfPlatform, Thread.Builder.OfVirtual
sealed í‚¤ì›Œë“œëŠ” í—ˆìš©ëœ ì„œë¸Œíƒ€ì…ë§Œ êµ¬í˜„ ê°€ëŠ¥í•˜ê²Œ ë§Œë“œëŠ” ì œì•½ ì„ ì–¸ì´ì•¼.

ì—¬ê¸°ì„œëŠ” OfPlatform, OfVirtualë§Œ Thread.Builderë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŒ.

----------------------------------------------------------------------------
Thread.ofVirtual()ì€ ë‚´ë¶€ì ìœ¼ë¡œ ________ ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•œë‹¤.

virtual

Thread.ofVirtual()ì€ Java 21ì—ì„œ ìƒˆë¡­ê²Œ ì¶”ê°€ëœ ë©”ì„œë“œë¡œ
JVMì—ì„œ ì§ì ‘ ê´€ë¦¬í•˜ëŠ” ê°€ìƒ ìŠ¤ë ˆë“œ(Virtual Thread) ë¥¼ ìƒì„±í•˜ëŠ” ë¹Œë”ë¥¼ ë°˜í™˜í•´.

ì´ ê°€ìƒ ìŠ¤ë ˆë“œëŠ” ê¸°ì¡´ í”Œë«í¼(ìš´ì˜ì²´ì œ) ìŠ¤ë ˆë“œë³´ë‹¤ í›¨ì”¬ ê°€ë³ê³ ,
ëŒ€ëŸ‰ì˜ ë™ì‹œ ì²˜ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ í•  ìˆ˜ ìˆì–´.

----------------------------------------------------------------------------

ì‹¤ì œ ìŠ¤ë ˆë“œë¥¼ ì‹¤í–‰í•  ë•ŒëŠ” builder._______(Runnable)ì„ í˜¸ì¶œí•œë‹¤.

start

Thread.Builderë¥¼ ì‚¬ìš©í•´ ìŠ¤ë ˆë“œë¥¼ ë§Œë“¤ê³  ì‹¤í–‰í•  ë•ŒëŠ”
start(Runnable) ë©”ì„œë“œë¥¼ í˜¸ì¶œí•´ì„œ ë°”ë¡œ ì‹¤í–‰í•˜ëŠ” ìŠ¤ë ˆë“œë¥¼ ìƒì„±í•¨.
start()ëŠ” ìŠ¤ë ˆë“œë¥¼ ë§Œë“¤ê³  ê³§ë°”ë¡œ ì‹¤í–‰í•œë‹¤.

ë§Œì•½ ì‹¤í–‰í•˜ì§€ ì•Šê³  ê°ì²´ë§Œ ë§Œë“¤ê³  ì‹¶ë‹¤ë©´ unstarted(Runnable)ì„ ì“°ë©´ ë¨.


----------------------------------------------------------------------------
ì‘ì—…ì´ ëë‚  ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¬ê¸° ìœ„í•´ thread._______()ì„ ì‚¬ìš©í•œë‹¤.

join

join() ë©”ì„œë“œëŠ” í•´ë‹¹ ìŠ¤ë ˆë“œê°€ ì¢…ë£Œë  ë•Œê¹Œì§€ í˜„ì¬ ìŠ¤ë ˆë“œë¥¼ ëŒ€ê¸°ì‹œí‚´
----------------------------------------------------------------------------
ì¼ë°˜ì ì¸ OS ê¸°ë°˜ ìŠ¤ë ˆë“œëŠ” Thread.Builder.Of________ì´ë‹¤.

Platform
----------------------------------------------------------------------------
3. ì˜ˆì¸¡ í€´ì¦ˆ (O/X)
Thread.BuilderëŠ” ì§ì ‘ êµ¬í˜„í•´ì„œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ê¶Œì¥ëœë‹¤.	(O/X)

x
----------------------------------------------------------------------------
VirtualThreadëŠ” ë¸”ë¡œí‚¹ ë©”ì„œë“œë„ ì•ˆì „í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.	(O/X)
o
----------------------------------------------------------------------------
switch ë¬¸ì—ì„œ Builder íƒ€ì…ì„ êµ¬ë¶„í•˜ë ¤ë©´ preview ê¸°ëŠ¥ì´ í•„ìš”í•˜ë‹¤.(O/X)
x
----------------------------------------------------------------------------
âœ… preview ê¸°ëŠ¥ì´ë€?
ì •ì‹ ê¸°ëŠ¥ìœ¼ë¡œ ì±„íƒë˜ê¸° ì „,
ì‹œí—˜ì ìœ¼ë¡œ(Javaì— íƒ‘ì¬ëœ ìƒíƒœì—ì„œ) ì‚¬ìš©í•´ë³¼ ìˆ˜ ìˆë„ë¡ ì œê³µë˜ëŠ” ê¸°ëŠ¥

ğŸ” ë¯¸ë¦¬ ì¨ë³´ê³  í”¼ë“œë°± ë°›ëŠ” â€œë² íƒ€ ê¸°ëŠ¥â€ ê°™ì€ ê²ƒ
â†’ ì–¸ì–´(Syntax)ë‚˜ JVMì— ì§ì ‘ ì˜í–¥ ì£¼ëŠ” ê¸°ëŠ¥ì¼ ë•Œ ì œê³µë¨
----------------------------------------------------------------------------
Platform ThreadëŠ” Virtual Threadë³´ë‹¤ ê²½ëŸ‰ì´ë‹¤.	(O/X)
x
----------------------------------------------------------------------------
sealed interfaceëŠ” switch-caseì˜ ì™„ì „ì„±ì„ ë³´ì¥í•œë‹¤.(O/X)

O
sealed interfaceëŠ” êµ¬í˜„ ê°€ëŠ¥í•œ ì„œë¸Œíƒ€ì…ì´ ëª…ì‹œì ìœ¼ë¡œ ì œí•œë¨

ë•ë¶„ì— switchë¬¸ì—ì„œ ì»´íŒŒì¼ íƒ€ì„ì— ëª¨ë“  caseë¥¼ ê²€ì‚¬í•  ìˆ˜ ìˆìŒ
----------------------------------------------------------------------------

 4. ì½”ë“œ ì¶”ë¡  ì‹¤ìŠµ (ë¹ˆì¹¸ ì±„ìš°ê¸°)  g_exam.java  ë§Œë“¤ê¸°
Thread.Builder builder = Thread.of_______().name("my-", 0);
(1) Virtual
switch (builder) {
    case Thread.Builder.OfVirtual v -> {
        Thread thread = v.____(() -> {
(2)unstarted
            System.out.println("ì‹¤í–‰ ì¤‘: " + Thread.currentThread());
            Thread._________(500);
(3)sleep
        });
        thread._______();
(4)start
    }
}
5. ì‹¤í–‰ ê²°ê³¼
ì‹¤í–‰ ì¤‘ (Virtual): ____________
ì‹¤í–‰ ì‹œê°„: _____ ms

6. í•œ ì¤„ ì •ë¦¬
sealed interfaceì™€ switch íŒ¨í„´ ë§¤ì¹­ì„ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ___________í•˜ê²Œ íƒ€ì… ë¶„ê¸°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆë‹¤.

ì•ˆì „í•˜ê³  ëª…í™•

7. ì•¼ì˜¹ì´ ğŸ± vs ë©ë©ì´ ğŸ¶ ì‚¬ê³¼ ë”°ê¸° ê²½ìŸ" (ë™ê¸°í™” ì‹¤ìŠµ) 
public class AppleTreeCompetition {
    private static int apples = 100;
    private static int catCount = 0;
    private static int dogCount = 0;

    public static void main(String[] args) throws InterruptedException {
        Runnable catTask = () -> {
            while (true) {
                if (!pickApple("ğŸ± ì•¼ì˜¹ì´")) break;
            }
        };

        Runnable dogTask = () -> {
            while (true) {
                if (!pickApple("ğŸ¶ ë©ë©ì´")) break;
            }
        };

        Thread t1 = new Thread((1)catTask, "ğŸ± ì•¼ì˜¹ì´");   // ğŸ± ì•¼ì˜¹ì´ ìŠ¤ë ˆë“œ ì‹œì‘
        Thread t2 = new Thread((2)dogTask, "ğŸ¶ ë©ë©ì´");   // ğŸ¶ ë©ë©ì´ ìŠ¤ë ˆë“œ ì‹œì‘

        t1.start();
        t2.start();

        t1.(3)___________();  // ìŠ¤ë ˆë“œ ì¢…ë£Œ ëŒ€ê¸°
        t2.(4)___________();
        3,4 join?

        System.out.println("ğŸ ìˆ˜í™• ì¢…ë£Œ!");
        System.out.println("ğŸ± ì•¼ì˜¹ì´: " + (5)________ + "ê°œ");
        System.out.println("ğŸ¶ ë©ë©ì´: " + (6)________ + "ê°œ");
        5 catCount
        6 dogCount
    }

    private static synchronized boolean pickApple(String who) {
        if (apples <= 0) return false;

        apples--;
        if (who.contains("ì•¼ì˜¹ì´")) catCount++;
        else dogCount++;

        System.out.println(who + " ê°€ ì‚¬ê³¼ë¥¼ ë•„ìŠµë‹ˆë‹¤! ğŸ ë‚¨ì€ ì‚¬ê³¼: " + apples);
        try {
            Thread.sleep((int)(Math.random() * 50));
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
        }
        return true;
    }
}

